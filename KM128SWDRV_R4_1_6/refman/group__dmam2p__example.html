<!-- HTML header for doxygen 1.8.9-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>MKMxxZxxACxx5 Bare Metal Software Drivers: DMA Memory to Peripheral Transfer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://www.mathjax.org/mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="drivers.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nxp_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MKMxxZxxACxx5 Bare Metal Software Drivers
   &#160;<span id="projectnumber">R4.1.6</span>
   </div>
   <div id="projectbrief">Reference Manual</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Introduction</span></a></li>
      <li><a href="pages.html"><span>Pages</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__dmam2p__example.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DMA Memory to Peripheral Transfer<div class="ingroups"><a class="el" href="group__dma__drv.html">DMA Driver</a> &raquo; <a class="el" href="group__dma__examples.html">DMA Examples</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>This example shows advanced use of the Direct Memory Access (DMA) module for application firmware CRC-32 calculation. The example code configures DMA channel to read each firmware byte from the Flash starting from ".intvec" section until end of the ".rodata" section. All bytes fetched by the DMA are transferred to the Cyclic Redundancy Check (CRC) module for CRC-32 calculation. </p><dl class="section user"><dt>Source code:</dt><dd><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment"> * (c) Copyright 2010-2015, Freescale Semiconductor Inc.</span></div>
<div class="line"><span class="comment"> * ALL RIGHTS RESERVED.</span></div>
<div class="line"><span class="comment"> ******************************************************************************</span></div>
<div class="line"><span class="comment"> * dmam2p_test.c</span></div>
<div class="line"><span class="comment"> ******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#include &quot;drivers.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/* Imported symbols from linker                                               */</span></div>
<div class="line"><span class="preprocessor">#if defined (__ICCARM__)</span></div>
<div class="line"><span class="preprocessor">  #pragma section = &quot;.intvec&quot;</span></div>
<div class="line"><span class="preprocessor">  #pragma section = &quot;.text&quot;</span></div>
<div class="line"><span class="preprocessor">#elif defined(__GNUC__)</span></div>
<div class="line">  <span class="keyword">extern</span> <span class="keywordtype">char</span> __CODE_BEGIN[];</div>
<div class="line">  <span class="keyword">extern</span> <span class="keywordtype">char</span> __CODE_END[];</div>
<div class="line"><span class="preprocessor">#elif defined(__CC_ARM)</span></div>
<div class="line">  <span class="keyword">extern</span> <span class="keywordtype">char</span> Load$$ER_ROM$$Base[];</div>
<div class="line">  <span class="keyword">extern</span> <span class="keywordtype">char</span> Load$$ER_ROM$$Length[];</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">volatile</span> <a class="code" href="group__basic__data__types.html#ga9560e25c315bae45d1ed4e2ce49ce55a" title="32-bit unsigned integer ">uint32</a> result;</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="group__basic__data__types.html#gadde6aaee8457bee49c2a92621fe22b79" title="8-bit unsigned integer ">uint8</a> *pCRC_DATA_REG;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if defined (__ICCARM__)</span></div>
<div class="line"><span class="preprocessor">  #pragma diag_suppress=Pa082</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="keywordtype">void</span> main (<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"><span class="preprocessor">#if defined (__ICCARM__)</span></div>
<div class="line">  <a class="code" href="group__basic__data__types.html#gadde6aaee8457bee49c2a92621fe22b79" title="8-bit unsigned integer ">uint8</a>* codeptr  = __section_begin(<span class="stringliteral">&quot;.intvec&quot;</span>);</div>
<div class="line">  <a class="code" href="group__basic__data__types.html#ga9560e25c315bae45d1ed4e2ce49ce55a" title="32-bit unsigned integer ">uint32</a> codesize = (<a class="code" href="group__basic__data__types.html#ga9560e25c315bae45d1ed4e2ce49ce55a" title="32-bit unsigned integer ">uint32</a>)__section_end(<span class="stringliteral">&quot;.text&quot;</span>)-(<a class="code" href="group__basic__data__types.html#ga9560e25c315bae45d1ed4e2ce49ce55a" title="32-bit unsigned integer ">uint32</a>)codeptr;</div>
<div class="line"><span class="preprocessor">#elif defined(__GNUC__)</span></div>
<div class="line">  <a class="code" href="group__basic__data__types.html#gadde6aaee8457bee49c2a92621fe22b79" title="8-bit unsigned integer ">uint8</a>* codeptr  = (<a class="code" href="group__basic__data__types.html#gadde6aaee8457bee49c2a92621fe22b79" title="8-bit unsigned integer ">uint8</a>*)__CODE_BEGIN;</div>
<div class="line">  <a class="code" href="group__basic__data__types.html#ga9560e25c315bae45d1ed4e2ce49ce55a" title="32-bit unsigned integer ">uint32</a> codesize = (<a class="code" href="group__basic__data__types.html#ga9560e25c315bae45d1ed4e2ce49ce55a" title="32-bit unsigned integer ">uint32</a>)__CODE_END-(<a class="code" href="group__basic__data__types.html#ga9560e25c315bae45d1ed4e2ce49ce55a" title="32-bit unsigned integer ">uint32</a>)codeptr;</div>
<div class="line"><span class="preprocessor">#elif defined(__CC_ARM)</span></div>
<div class="line">  <a class="code" href="group__basic__data__types.html#gadde6aaee8457bee49c2a92621fe22b79" title="8-bit unsigned integer ">uint8</a>* codeptr  = (<a class="code" href="group__basic__data__types.html#gadde6aaee8457bee49c2a92621fe22b79" title="8-bit unsigned integer ">uint8</a>*)Load$$ER_ROM$$Base;</div>
<div class="line"><span class="preprocessor">  #pragma diag_suppress 1296</span></div>
<div class="line">  <a class="code" href="group__basic__data__types.html#ga9560e25c315bae45d1ed4e2ce49ce55a" title="32-bit unsigned integer ">uint32</a> codesize = (<a class="code" href="group__basic__data__types.html#ga9560e25c315bae45d1ed4e2ce49ce55a" title="32-bit unsigned integer ">uint32</a>)Load$$ER_ROM$$Length;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Initialize SIM module                                                    */</span></div>
<div class="line">  <a class="code" href="group__sim__macro.html#ga29bf1a8a2c379d066cbf00ce6f4b650b" title="SIM initialization. ">SIM_Init</a>  (<a class="code" href="group__sim__config.html#ga899efbad9c2c6af161201c24aafd9e71" title="Full configuration. ">SIM_MODULE_ALL_PERIPH_ON_CONFIG</a>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">while</span> (1)</div>
<div class="line">  {</div>
<div class="line">    <span class="comment">/* Initialize CRC module                                                  */</span></div>
<div class="line">    pCRC_DATA_REG = (<a class="code" href="group__basic__data__types.html#gadde6aaee8457bee49c2a92621fe22b79" title="8-bit unsigned integer ">uint8</a>*)<a class="code" href="group__crc__macro.html#ga4f7cf70c2c266795d52e6bf6fdafeb94" title="Initializes CRC calculation. ">CRC_Init</a> (<a class="code" href="group__crc__module__config.html#ga655ec02c2e703f896973218889cd641b" title="Initializes CRC module for CRC32 computation. ">CRC_MODULE_CRC32_CONFIG</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Initialize DMA for memory to peripheral continuous SW trigger transfer */</span></div>
<div class="line">    <a class="code" href="group__dma__macro.html#ga1d482580824b12e4864d314d8bf84e0f" title="DMA channel initialization. ">DMA_Init</a> (DMA0,</div>
<div class="line">        <a class="code" href="group__dma__chan__config.html#ga955f9bc29947e7423b4cd658590ec4fa" title="Selects software initiated continuous memory to peripheral data transfer. ">DMA_CH_SWTRG_M2P_CN_CONFIG</a>(codeptr,<a class="code" href="group__dma__request__sizes.html#ga5ca8b5b8f0e5dfe8e675c6f6b2efec1f" title="1-byte transfer ">DMA_SIZE8BIT</a>,pCRC_DATA_REG,codesize));</div>
<div class="line">    <span class="keywordflow">while</span> (!<a class="code" href="group__dma__macro.html#gab49935791daab0db6c28e3d0ad956b9d" title="DMA channel transfer complete check. ">DMA_IsDone</a>(DMA0));  <span class="comment">/* Wait until transfer is completed           */</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Read computed CRC code; CW:0xa78f61ea, IAR:0x2399e3a5, XW:0x086decea   */</span></div>
<div class="line">    <span class="comment">/*                         UV:0xbb598a8d                                  */</span></div>
<div class="line">    result = <a class="code" href="group__crc__macro.html#ga14104c56c95d5feccc3b1448da27ad8a" title="Reads and returns calculated CRC code. ">CRC_Read</a>();</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>Toolchain support:</dt><dd><table class="doxtable">
<tr>
<th align="center"><code>IAR EWARM 7.40.7</code></th><th align="center"><code>CodeWarrior 10.6</code></th><th align="center"><code>KEIL uVision 5.15</code></th><th align="center"><code>CrossWorks 3.6</code></th><th align="center"><code>ATOLLIC TrueStudio 5.3.0</code></th><th align="center"><code>Kinetis Design Studio 3.0.0</code>  </th></tr>
<tr>
<td align="center"><b>&diams;</b> </td><td align="center"><b>&diams;</b> </td><td align="center"><b>&diams;</b> </td><td align="center"><b>&diams;</b> </td><td align="center"><b>&diams;</b> </td><td align="center"><b>&diams;</b> </td></tr>
</table>
</dd></dl>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.9-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">Tue Nov 22 2016 &copy; 2016 NXP Semiconductors, Inc. All rights reserved.
    </li>
  </ul>
</div>
</body>
</html>
